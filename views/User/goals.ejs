<% layout('boilerplate/template') -%>

<% block('goals').append('<link rel="stylesheet" type="text/css" href="/css/goals/goals.css">') %>



<!-- Helped by the code from here: https:\\codepen.io\subarroca\pen\JbMzpG -->
<script>
    function changeColours(){
        let value1 = Math.round(Math.random()*100)/100;
        let value2 = Math.round(Math.random()*100)/100;

        changeBar(document.getElementById("stepsProgressBarID"), document.getElementById("stepBoxID"), value1);
        changeBar(document.getElementById("drinkProgressBarID"), document.getElementById("drinkBoxID"), value2);
    }

    function changeBar(element, box, value){
        <!--element.style.setProperty('background-color', value);-->
        element.style.width=`${value*100}%`;
        element.style.setProperty('background-color', getColor(value));
        element.innerHTML = `${Math.round(value*100)}%`;
        box.parentElement.className="card shadow-lg mb-3 border-danger";
        if (value<0.2) {
            box.className='card-body display-relative redBox';
        } else {
            if(value<0.75){
                box.className='card-body display-relative orangeBox';
            } else {
                box.className='card-body display-relative greenBox';
                box.parentElement.className="card shadow-lg mb-3 border-success";
            }
        }
    }

    function getColor(value){
        return  (value<0.2)?'#c03':((value<0.75) ? '#e56432': '#137545');
    }
</script>


<div id = "goalsDiv">
    <h2 class="center"><strong> Goals </strong></h2>

    <button type="button" class="btn btn-success" onclick="changeColours()">Change values below</button>
    <br>
    <br>
    <br>
    <br>

    <div id="cardsDiv">
        <div class="container">
            <div class="row">
                <div class="col-sm">
                    <div class="card shadow-lg mb-3 border-success">
                        <div class="card-body display-relative greenBox" id = "stepBoxID">
                            <h3 class="card-title">&nbsp;<strong>Steps</strong></h3>
                            <hr>
                            How many steps do you want to do today: <input placeholder="enter a number" type="number" name="stepsGoalNumber" autofocus />
                            <br>
                            <br>
                            <div id = "stepsProgressDiv">
                                <div class="float-start">0</div>
                                <div class="float-end">&nbsp;*amount of steps*</div><br>
                                <div class="progress">
                                    <div class="progress-bar" id="stepsProgressBarID" style="background-color:green; width:90%;" aria-valuemin="0" aria-valuemax="100">
                                        90%
                                    </div>
                                </div>
                            </div>

                            <br>
                        </div>
                    </div>
                </div>
            </div>
            <br>
            <br>
            <br>
            <div class="row">
                <div class="col-sm">
                    <div class="card shadow-lg mb-3 border-danger">
                        <div class="card-body display-relative redBox" id = "drinkBoxID">
                            <h3 class="card-title">&nbsp;<strong>Hydration</strong></h3>
                            <hr>
                            How many cups do you want to drink today: <input placeholder="enter a number" type="number" name="drinkGoalNumber" autofocus />
                            <br>
                            <br>
                            <div id = "drinkProgressDiv">
                                <div class="float-start">0</div>
                                <div class="float-end">&nbsp;*amount of cups*</div><br>
                                <div class="progress">
                                    <div class="progress-bar" id="drinkProgressBarID" style="background-color:#c03; width:5%;" aria-valuemin="0" aria-valuemax="100">
                                        5%
                                    </div>
                                </div>
                            </div>

                            <br>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</div>